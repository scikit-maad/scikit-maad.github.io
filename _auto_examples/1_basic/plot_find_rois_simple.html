

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Simple audio segmentation &mdash; scikit-maad 1.1 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Audio representation" href="plot_audio_representation.html" />
    <link rel="prev" title="Example gallery" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> scikit-maad
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../sound.html">Sound processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rois.html">Segmentation methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Acoustic features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spl.html">Sound pressure level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../util.html">Utilities</a></li>
</ul>
<p class="caption"><span class="caption-text">Example Gallery</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Example gallery</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#basic-examples">Basic examples</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Simple audio segmentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#load-audio-file">Load audio file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#detect-the-bouncy-trill">Detect the bouncy trill</a></li>
<li class="toctree-l4"><a class="reference internal" href="#detect-the-fast-descending-chirp">Detect the fast descending chirp</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="plot_audio_representation.html">Audio representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="plot_circadian_spectrogram.html">Circadian soundscape</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#advanced-examples">Advanced examples</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">scikit-maad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Example gallery</a> &raquo;</li>
        
      <li>Simple audio segmentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_auto_examples/1_basic/plot_find_rois_simple.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-1-basic-plot-find-rois-simple-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="simple-audio-segmentation">
<span id="sphx-glr-auto-examples-1-basic-plot-find-rois-simple-py"></span><h1>Simple audio segmentation<a class="headerlink" href="#simple-audio-segmentation" title="Permalink to this headline">¶</a></h1>
<p>In audio signals, regions of interest are usually regions with high density of energy. The function <a href="#id1"><span class="problematic" id="id2">``</span></a>find_rois_cwt` allows finding regions of interest in the signal giving very simple and intuitive parameters: temporal length and frequency limits. This segmentation can be seen as a coarse detection process, the starting point of more advanced classification methods.</p>
<p>The following sound example as two main different soundtypes in the foreground:</p>
<ul class="simple">
<li><p>A bouncy trill between 4.5 and 8 kHz lasting approximately 2 seconds</p></li>
<li><p>A fast descending chirp between 8 and 12 kHz lasting 0.1 approximately seconds</p></li>
</ul>
<div class="section" id="load-audio-file">
<h2>Load audio file<a class="headerlink" href="#load-audio-file" title="Permalink to this headline">¶</a></h2>
<p>Load an audio file and compute the spectrogram for visualization.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">maad</span> <span class="kn">import</span> <span class="n">sound</span>
<span class="kn">from</span> <span class="nn">maad.rois</span> <span class="kn">import</span> <span class="n">find_rois_cwt</span>
<span class="kn">from</span> <span class="nn">maad.util</span> <span class="kn">import</span> <span class="n">plot_spectrogram</span>

<span class="n">s</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fs</span></a> <span class="o">=</span> <span class="n">sound</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;../../data/spinetail.wav&#39;</span><span class="p">)</span>
<span class="n">Sxx</span><span class="p">,</span> <span class="n">tn</span><span class="p">,</span> <span class="n">fn</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ext</span></a> <span class="o">=</span> <span class="n">sound</span><span class="o">.</span><span class="n">spectrogram</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fs</span></a><span class="p">,</span> <span class="n">nperseg</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="n">plot_spectrogram</span><span class="p">(</span><span class="n">Sxx</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">ext</span></a><span class="p">,</span> <span class="n">db_range</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<img alt="plot find rois simple" class="sphx-glr-single-img" src="../../_images/sphx_glr_plot_find_rois_simple_001.png" />
</div>
<div class="section" id="detect-the-bouncy-trill">
<h2>Detect the bouncy trill<a class="headerlink" href="#detect-the-bouncy-trill" title="Permalink to this headline">¶</a></h2>
<p>The accelerating trill is the song of a small neotropical bird, the Red-faced Spinetail <em>Cranioleuca erythrops</em>. This song can be detected on the recording using the function <code class="docutils literal notranslate"><span class="pre">find_rois_cwt</span></code> and setting frequency limits <code class="docutils literal notranslate"><span class="pre">flims=(4500,8000)</span></code> and temporal length of signal <code class="docutils literal notranslate"><span class="pre">tlen=2</span></code>. The segmentation results are returned as a dataframe with temporal segmentation given by the function and using the frequency limits defined by the user.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_trill</span> <span class="o">=</span> <span class="n">find_rois_cwt</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fs</span></a><span class="p">,</span> <span class="n">flims</span><span class="o">=</span><span class="p">(</span><span class="mi">4500</span><span class="p">,</span><span class="mi">8000</span><span class="p">),</span> <span class="n">tlen</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">th</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_trill</span><span class="p">)</span>
</pre></div>
</div>
<img alt="plot find rois simple" class="sphx-glr-single-img" src="../../_images/sphx_glr_plot_find_rois_simple_002.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>    min_f     min_t   max_f     max_t
0  4500.0   0.74304  8000.0   2.50776
1  4500.0   5.10839  8000.0   7.33751
2  4500.0  11.23846  8000.0  13.37469
3  4500.0  16.16109  8000.0  18.29732
</pre></div>
</div>
</div>
<div class="section" id="detect-the-fast-descending-chirp">
<h2>Detect the fast descending chirp<a class="headerlink" href="#detect-the-fast-descending-chirp" title="Permalink to this headline">¶</a></h2>
<p>Alternatively, the fast descending chirp (unknown species) can be segmented in the recording by changing the detection parameters, <code class="docutils literal notranslate"><span class="pre">flims</span></code> and <code class="docutils literal notranslate"><span class="pre">tlen</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_chirp</span> <span class="o">=</span> <span class="n">find_rois_cwt</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <a href="https://docs.python.org/3/library/functions.html#int" title="builtins.int" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fs</span></a><span class="p">,</span> <span class="n">flims</span><span class="o">=</span><span class="p">(</span><span class="mi">8000</span><span class="p">,</span><span class="mi">12000</span><span class="p">),</span> <span class="n">tlen</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">th</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_chirp</span><span class="p">)</span>
</pre></div>
</div>
<img alt="plot find rois simple" class="sphx-glr-single-img" src="../../_images/sphx_glr_plot_find_rois_simple_003.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>     min_f     min_t    max_f     max_t
0   8000.0   0.18576  12000.0   0.26993
1   8000.0   1.30612  12000.0   1.39900
2   8000.0   2.83574  12000.0   2.91701
3   8000.0   3.02730  12000.0   3.10857
4   8000.0   6.40871  12000.0   6.49288
5   8000.0   8.05152  12000.0   8.14150
6   8000.0   9.04417  12000.0   9.12544
7   8000.0  10.11519  12000.0  10.20517
8   8000.0  11.90023  12000.0  11.99601
9   8000.0  12.75356  12000.0  12.84934
10  8000.0  15.50222  12000.0  15.59220
11  8000.0  15.68508  12000.0  15.77215
12  8000.0  16.31202  12000.0  16.40490
13  8000.0  17.29016  12000.0  17.38014
14  8000.0  18.27701  12000.0  18.37279
15  8000.0  19.22032  12000.0  19.31610
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.102 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-1-basic-plot-find-rois-simple-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/426c8c446b4451cfcdd5a3774fffd1e6/plot_find_rois_simple.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_find_rois_simple.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/d794a2c28e2dc083bd46a845cc0a961e/plot_find_rois_simple.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_find_rois_simple.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plot_audio_representation.html" class="btn btn-neutral float-right" title="Audio representation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Example gallery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, scikit-maad development team.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>